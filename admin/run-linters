#!/bin/bash
set -x

if rg -t rust -t protobuf -g '!.old-files' -g '!hello-scylla' 'TODO|TOOD|LATER|IN-?PROGRESS|\\todo|todo!|dbg!'; then
    echo "You have TODO-s"
    exit 1
fi

set -e
cargo clippy -- --no-deps -Dwarnings \
      -A clippy::result_large_err \
      -A clippy::uninlined_format_args
RUSTDOCFLAGS=-Dwarnings cargo doc --no-deps

